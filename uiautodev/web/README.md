# UIAuto Web - 设备调试界面

这是一个用于替代原 https://uiauto.devsleep.com/ 的本地Web界面，提供设备调试功能。

## 功能特性

- 🔍 **设备管理**: 自动发现并连接Android、iOS、Harmony设备
- 📱 **实时截图**: 自动刷新设备屏幕截图
- 🌳 **元素层次**: 显示页面元素的树形结构
- 📋 **详细信息**: 查看选中元素的完整属性信息
- 🎯 **交互操作**: 点击截图或元素树选择元素
- 🎨 **现代界面**: 响应式设计，支持多种屏幕尺寸

## 使用方法

### 1. 启动uiautodev服务

首先确保uiautodev服务正在运行：

```bash
# 在项目根目录下
uiauto.dev
```

服务将在 `http://localhost:20242` 启动。

### 2. 打开Web界面

在浏览器中打开 `uiautoweb/index.html` 文件，或者通过本地服务器访问：

```bash
# 使用Python简单服务器
cd uiautoweb
python -m http.server 8080

# 然后在浏览器访问 http://localhost:8080
```

### 3. 连接设备

1. 点击"刷新设备"按钮获取可用设备列表
2. 从下拉菜单中选择要调试的设备
3. 界面将自动开始显示设备截图和元素信息

### 4. 调试操作

- **查看截图**: 左侧面板显示设备的实时截图
- **浏览元素**: 中间面板显示页面元素的树形结构
- **查看详情**: 右侧面板显示选中元素的详细信息
- **选择元素**: 
  - 点击中间面板的元素树节点
  - 或直接点击左侧截图上的元素
- **刷新数据**: 使用各面板的刷新按钮更新数据

## 界面布局

```
┌─────────────────────────────────────────────────────────┐
│                    标题栏 + 设备选择                      │
├─────────────┬─────────────────────┬─────────────────────┤
│             │                     │                     │
│   设备截图   │     元素层次结构     │    元素详细信息      │
│             │                     │                     │
│   (左侧)    │       (中间)        │      (右侧)         │
│             │                     │                     │
├─────────────┴─────────────────────┴─────────────────────┤
│                      状态栏                             │
└─────────────────────────────────────────────────────────┘
```

## 支持的设备类型

- **Android**: 通过ADB连接的Android设备
- **iOS**: 通过USB连接的iOS设备 (需要WDA)
- **Harmony**: 华为鸿蒙设备 (需要HDC)

## 技术实现

- **前端**: 纯HTML + CSS + JavaScript，无需额外框架
- **后端**: 使用uiautodev提供的REST API
- **通信**: 通过HTTP请求获取设备信息、截图、元素数据
- **实时更新**: 自动定时刷新截图 (2秒间隔)

## API接口

界面使用以下uiautodev API接口：

- `GET /api/{platform}/list` - 获取设备列表
- `GET /api/{platform}/{serial}/screenshot/{id}` - 获取设备截图
- `GET /api/{platform}/{serial}/hierarchy` - 获取元素层次结构

## 故障排除

### 设备列表为空
- 确保设备已连接并启用调试模式
- 检查uiautodev服务是否正常运行
- 尝试点击"刷新设备"按钮

### 截图无法显示
- 检查设备是否处于唤醒状态
- 确认设备权限设置正确
- 查看浏览器控制台的错误信息

### 元素信息不准确
- 点击"刷新层次"按钮更新元素信息
- 某些动态内容可能需要多次刷新

### 跨域问题
- 如果遇到CORS错误，建议通过本地服务器访问HTML文件
- 或者在uiautodev服务中已配置允许跨域访问

## 开发说明

如需修改或扩展功能：

1. **HTML结构**: 修改 `index.html` 中的页面布局
2. **样式设计**: 编辑 `styles.css` 调整界面外观
3. **功能逻辑**: 更新 `app.js` 中的JavaScript代码
4. **API集成**: 参考uiautodev的API文档添加新功能

## 许可证

本项目遵循与uiautodev相同的MIT许可证。